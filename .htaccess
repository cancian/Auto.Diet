###############
## KCALS.NET ##
###############
AddDefaultCharset UTF-8
SetEnv TZ America/Sao_Paulo
Options -Indexes
##########
## MIME ##
##########
AddType font/ttf .ttf
AddType text/plain .db
AddType text/plain .sql
AddType text/cache-manifest .appcache
AddType text/cache-manifest .manifest
AddType application/x-web-app-manifest+json .webapp
AddType application/x-httpd-php .html
#AddHandler application/x-httpd-php .html
###################
## DIRECT ACCESS ##
###################
<Files "userlist.txt">
	Order Allow,Deny
	Deny from all
</Files>
<Files "auth.html">
	Order Allow,Deny
	Deny from all
</Files>
##############
## NO CACHE ##
##############
#<filesMatch "\.(html|htm|php|js|css|ttf|woff|cur|ico|jpg|png|gif|json|txt|db|sql|xml|appcache|manifest|webapp)$">
	<ifModule mod_headers.c>
		FileETag None
		Header unset ETag
		Header set Expires "Fri, 19 Feb 1982 03:00:00 GMT"
		Header set Cache-Control "max-age=0"
		#CORS
		Header set Access-Control-Allow-Origin "*"
		Header set Access-Control-Allow-Credentials "true"
		Header set Access-Control-Allow-Methods "OPTIONS, GET, POST"
		Header set Access-Control-Allow-Headers "Content-Type, Depth, User-Agent, X-File-Size, X-Requested-With, If-Modified-Since, X-File-Name, Cache-Control"
	</ifModule>
#</filesMatch>
#################
## MOD_REWRITE ##
#################
<IfModule mod_rewrite.c>
	RewriteEngine On
	RewriteBase /
	#JS
	#RewriteCond %{HTTP_HOST} !.kcals.net$  [NC]
	#RewriteCond %{HTTP_HOST} !192.168.1.5$ [NC]
	#RewriteCond %{REQUEST_URI} !js/min/
	#RewriteRule ^js/(.*)$ js/min/$1 [L,QSA]
	#CSS
	#RewriteCond %{HTTP_HOST} !.kcals.net$  [NC]
	#RewriteCond %{HTTP_HOST} !192.168.1.5$ [NC]
	#RewriteCond %{REQUEST_URI} !css/min/
	#RewriteRule ^css/(.*)$ css/min/$1 [L,QSA]
	#STATIC
	RewriteCond %{HTTPS} !=on
	RewriteCond %{HTTP_USER_AGENT} (googlebot|adsbot-google|alexa|baidu|bingbot|msnbot|faviconizer|daum|psbot|gigabot|twitterbot|linkedinbot|yahoo|pingdom|slurp|crawler|spider|robot|seeker|crawling|extractor) [NC]
	RewriteRule index.html static.html [L,QSA]
</IfModule>
#############
## DEFLATE ##
#############
SetOutputFilter DEFLATE
